<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MIPschell: Product Mix</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MIPschell
   &#160;<span id="projectnumber">1.3.0</span>
   </div>
   <div id="projectbrief">A language for writing Mixed Integer Programs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Product Mix </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="mipshell_ProdMix"></a>
Product Mix</h1>
<p>Now we are ready to solve our first optimization problem with <b>MIPshell</b>.</p>
<p>An engineering factory can produce five products by using two production processes: grinding and drilling. Each unit of each product yields the following contribution to profit:</p>
<center> <table class="doxtable">
<tr>
<th align="center">Prod 1 </th><th align="center">Prod 2 </th><th align="center">Prod 3 </th><th align="center">Prod 4 </th><th align="center">Prod 5  </th></tr>
<tr>
<td align="center">$550 </td><td align="center">$600 </td><td align="center">$350 </td><td align="center">$400 </td><td align="center">$200 </td></tr>
</table>
</center><p>Processing time (in hours) per product units are given below. A dash indicates that a process is not needed.</p>
<center> <table class="doxtable">
<tr>
<th align="center"></th><th align="center">Prod 1 </th><th align="center">Prod 2 </th><th align="center">Prod 3 </th><th align="center">Prod 4 </th><th align="center">Prod 5  </th></tr>
<tr>
<td align="center">Grinding </td><td align="center">12 </td><td align="center">20 </td><td align="center">&mdash; </td><td align="center">25 </td><td align="center">15 </td></tr>
<tr>
<td align="center">Drilling </td><td align="center">10 </td><td align="center">8 </td><td align="center">16 </td><td align="center">&mdash; </td><td align="center">&mdash; </td></tr>
</table>
</center><p>In addition the final assembly of each unit of each product requires 20 hours of an employee's time.</p>
<p>The factory has three grinding and two drilling machines, and works a six-day week with two shifts of 8 hours on each day. Eight workers are employed in assembly, each working one shift a day.</p>
<p>The problem is to decide how many units of each product to produce so as to maximize the total factory profit.</p>
<p>To formulate a <em>mathematical model</em>, we introduce variables <code>x1,x2,...,x5</code> where <code>xi</code> is the number of units of product <code>i</code> to be produced in a week. The complete model is as below: </p><pre class="fragment"> 550*x1 + 600*x2 + 350*x3 + 400*x4 + 200*x5 -&gt; max,   (1.a)
 12*x1 + 20*x_2 + 25*x4 + 15*x5 &lt;= 288,               (1.b)
 10*x1 + 8*x2 + 16*x3 &lt;= 192,                         (1.c)
 20*x1 + 20*x2 + 20*x3 + 20*x4 + 20 x5 &lt;= 384,        (1.d)
 x1,x2,x3,x4,x5 --- non-negative integers.            (1.e)
</pre><p>Given that we have three grinding machines working for a total of 96 hours a week each, we have 288 hours of grinding capacity available. The total amount of grinding capacity that we use in a week is given by the expression on the left hand side of inequality (1.b).</p>
<p>Similarly, inequality (1.c) says that we cannot exceed the drilling capacity in 192 hours a week.</p>
<p>The fact that we have only eight workers each working 48 hours a week gives us a labor capacity of 384 hours. Since each unit of each product uses 20 hours of this capacity we have inequality (1.d) in our model.</p>
<p>Finally, constraint (1.e) simply says that all five variable are nonnegative integers.</p>
<h2><a class="anchor" id="mipshell_FirstProgram"></a>
MIPshell-implementation</h2>
<p>The easiest way of using <b>MIPshell</b> is to run a shell script <code>mipinit</code> to build a skeleton <b>MIPshell</b> application with an empty model, and then extend this skeleton application.</p>
<p>So, first we open a consol window and enter our working directory. Then we use the command </p><pre class="fragment">mipinit prodmix
</pre><p>to create a new directory called <code>prodmix</code> and populate it with a number of subdirectories and files. In particular, there are four files in the directory <code>sources</code>:</p>
<p>main.cpp, prodmix.h, prodmix.cpp, and prodmix.mod.</p>
<p>To solve our simple example, we need to modify only one of these files, <code>prodmix.mod</code>. Its contents is as follows.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> Cprodmix::model()</div><div class="line">{</div><div class="line"><span class="comment">// TODO: write your model here</span></div><div class="line">    optimize();</div><div class="line">    <a class="code" href="Problem_8h.html#a71d33b1bbfc010c85e7d36ab2fe3f058">printsol</a>();</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">} <span class="comment">// end of Cpromix::model</span></div></div><!-- fragment --><p>In place of the line "// TODO: write your model here", we need to write down our code. A MIPshell implementation of IP (1)&ndash;(5) is given below.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> Cprodmix::model()</div><div class="line">{</div><div class="line">     <a class="code" href="classCVarVector.html">VAR_VECTOR</a> x(<span class="stringliteral">&quot;x&quot;</span>,<a class="code" href="Var_8h.html#a1cec2e482ee71e7e701a8ef2025f8ebaa9700b305a3d7a8829567b7ebc37ce1e8">INT_GE</a>,5);</div><div class="line">     maximize(550*x(0)+600*x(1)+350*x(2)+400*x(3)+200*x(4));</div><div class="line">     12*x(0)+20*x(1)+25*x(3)+15*x(4) &lt;=  288;</div><div class="line">     10*x(0)+8*x(1)+16*x(2) &lt;= 192;</div><div class="line">     20*x(0)+20*x(1)+20*x(2)+20*x(3)+20*x(4) &lt;= 384;</div><div class="line">     optimize();</div><div class="line">     <a class="code" href="Problem_8h.html#a71d33b1bbfc010c85e7d36ab2fe3f058">printsol</a>(<span class="stringliteral">&quot;prodmix.sol&quot;</span>);</div><div class="line">     <span class="keywordflow">return</span> 0;</div><div class="line">} <span class="comment">// end of Cpromix::model</span></div></div><!-- fragment --><p>It should be noted that a variable <code>xi</code> in the mathematical model corresponds to the <b>MIPshell</b> variable <code>x(i-1)</code>. Similar mappings between mathematical and <code>MIPshell</code> variables are implicitly assumed in many other examples of this guide.</p>
<p>We build an executable with the commands </p><pre class="fragment">cd /prodmix/release
make all 
</pre><p>and then run the executable to solve our instance </p><pre class="fragment">cd ../bin
promix
</pre><p>If the output file <code>prodmix.sol</code> looks like the one given below, then you are done; otherwise, check once again you model and correct it.</p>
<pre class="fragment">  Objective Value = 10800
  Variables
               Name             Value
               x(4)          0.000000
               x(3)          0.000000
               x(2)          0.000000
               x(1)          7.000000
               x(0)         12.000000</pre> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
