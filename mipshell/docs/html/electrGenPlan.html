<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MIPschell: Electricity Generation Planning</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MIPschell
   &#160;<span id="projectnumber">1.3.0</span>
   </div>
   <div id="projectbrief">A language for writing Mixed Integer Programs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Electricity Generation Planning </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="mipshell_unitComm"></a>
Unit Commitment Problem (Electricity Generation Planning)</h1>
<p>The <em>unit commitment problem</em> (<em>UCP</em>) is to develop an hourly (or half-hourly) electricity production schedule spanning some period (a day or a week) so as to decide which generators will be producing and at what levels.</p>
<p>Let <em>T</em> be the number of periods. Period&#160;1 follows period&#160;<em>T</em>. We know the <em>demand</em> <img class="formulaInl" alt="$d_t$" src="form_81.png"/> for each period&#160;<em>t</em>. In each period the capacity of the active generators must be at least <em>q</em> times of the demand (<em>q</em> is a level of reliability).</p>
<p>Let <em>n</em> be the number of generators, and let generator <em>i</em> have the following characteristics:</p><ul>
<li><img class="formulaInl" alt="$l_i, u_i$" src="form_82.png"/>: minimum and maximum levels of production per period;</li>
<li><img class="formulaInl" alt="$r^1_i,r^2_i$" src="form_83.png"/>: inertia parameters (when a generator is on in two successive periods, its output cannot decrease by more than <img class="formulaInl" alt="$r^1_i$" src="form_84.png"/>, and increase by more than <img class="formulaInl" alt="$r^2_i$" src="form_85.png"/>);</li>
<li><img class="formulaInl" alt="$g_i$" src="form_86.png"/>: start-up cost (if a generator is off in some period, it costs <img class="formulaInl" alt="$g_i$" src="form_86.png"/> to start it in the next period);</li>
<li><img class="formulaInl" alt="$f_i, p_i$" src="form_87.png"/>: fixed and variable costs (if in some period a generator is producing at level <em>v</em>, it costs <img class="formulaInl" alt="$f_i+p_i v$" src="form_88.png"/>).</li>
</ul>
<p>With the following natural choice of variables</p><ul>
<li><img class="formulaInl" alt="$x_{it}=1$" src="form_89.png"/> if generator <em>i</em> produces in period&#160;<em>t</em>, and <img class="formulaInl" alt="$x_{it}=0$" src="form_90.png"/>, otherwise;</li>
<li><img class="formulaInl" alt="$z_{it}=1$" src="form_91.png"/> if generator <em>i</em> is switched on in period&#160;<em>t</em>, and <img class="formulaInl" alt="$z_{it}=0$" src="form_92.png"/>, otherwise;</li>
<li><img class="formulaInl" alt="$y_{it}$" src="form_64.png"/>: amount of electricity produced by generator <em>i</em> in period <em>t</em>,</li>
</ul>
<p>we get the formulation:</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\begin{align} \sum_{i=1}^n \sum_{t=1}^T (g_i z_{it} + f_i x_{it} &amp;+ p_i y_{it}) \to \min \tag{1.a}\\ \sum_{i=1}^n y_{it} = d_t,\quad &amp; t=1,\ldots,T, \tag{1.b}\\ \sum_{i=1}^n u_i x_{it} \ge q\,d_t,\quad &amp; t=1,\ldots,T, \tag{1.c}\\ l_i x_{it}\le y_{it}\le u_i x_{it},\quad &amp; i=1,\ldots,n;\; t=1,\ldots,T, \tag{1.d}\\ -r^1_i \le y_{it} - y_{i,((t-2+T)\bmod{T})+1} \le r^2_i,\quad &amp; i=1,\ldots,n;\; t=1,\ldots,T,\tag{1.e}\\ x_{it} - x_{i,((t-2+T)\bmod{T})+1} \le z_{it},\quad &amp; i=1,\ldots,n;\; t=1,\ldots,T, \tag{1.f}\\ z_{it}\le x_{it},,\quad &amp; i=1,\ldots,n;\; t=1,\ldots,T, \tag{1.g}\\ x_{it}, z_{it} \in \{0,1\},\quad &amp; i=1,\ldots,n;\; t=1,\ldots,T, \tag{1.h}\\ y_{it}\in \mathbb{R}_+,\quad &amp; i=1,\ldots,n;\; t=1,\ldots,T. \tag{1.i} \end{align}" src="form_93.png"/>
</p>
<p>Here the objective (1.a) is to minimize the total expenses on starting and exploiting the all available generators during the time horizon. The equations (1.b) require that demands for electricity be satisfied in each period. The inequalities (1.c) are to guarantee that, in each period, the capacities of active generators are sufficient to <em>q</em> times rise the production of electricity. The lower and upper variable bounds (1.d) demand that in any period the amount of electricity produced by each generator be within its lower and upper capacities. The inequalities (1.e) impose the restrictions on the inertial changing of the power of each generator. The inequalities (1.f) and (1.g) together establishes the logical relations between two families of binary variables: <img class="formulaInl" alt="$z_{it}=1\quad\Rightarrow\quad x_{i,t-1}=0\text{ and } x_{it}=1$" src="form_94.png"/>.</p>
<h2><a class="anchor" id="mipshell_unitComImpl"></a>
MIPshell-implementation</h2>
<p>To solve the unit commitment problem, we developed a <b>C++</b> class <code>Cunitcom</code>, which definition is as follows.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="mipshell_8h.html">mipshell.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">class </span>Cunitcom: <span class="keyword">public</span> <a class="code" href="classCProblem.html">CProblem</a></div><div class="line">{</div><div class="line">    <span class="keywordtype">int</span> m_iGenNum, m_iT;</div><div class="line">    <span class="keywordtype">double</span> m_dQ;</div><div class="line">    <span class="keywordtype">int</span> *m_ipDemand;</div><div class="line">    <span class="keywordtype">int</span> *m_ipUpCapacity, *m_ipLoCapacity,</div><div class="line">        *m_ipRminus, *m_ipRPlus, </div><div class="line">        *m_ipStartUpCost, *m_ipFixedCost, *m_ipUnitCost;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    Cunitcom(<span class="keyword">const</span> <span class="keywordtype">char</span>* name);</div><div class="line"><span class="preprocessor">#ifdef __THREADS_</span></div><div class="line">    Cunitcom(<span class="keyword">const</span> Cunitcom &amp;other, <span class="keywordtype">int</span> thread);</div><div class="line">    <a class="codeRef" doxygen="/home/nick/programs/mip/mipcl/docs/mipcl.tag:../../../mipcl/docs/html/" href="../../../mipcl/docs/html/classCMIP.html">CMIP</a>* <a class="codeRef" doxygen="/home/nick/programs/mip/mipcl/docs/mipcl.tag:../../../mipcl/docs/html/" href="../../../mipcl/docs/html/classCMIP.html#a33363f035bbd0ac5746cc4753886b013">clone</a>(<span class="keyword">const</span> <a class="codeRef" doxygen="/home/nick/programs/mip/mipcl/docs/mipcl.tag:../../../mipcl/docs/html/" href="../../../mipcl/docs/html/classCMIP.html">CMIP</a> *pMip, <span class="keywordtype">int</span> thread);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">    <span class="keyword">virtual</span> ~Cunitcom();</div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> model();</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> readData(<span class="keyword">const</span> <span class="keywordtype">char</span> *fileName);</div><div class="line">    <span class="keywordtype">void</span> printSol(<a class="code" href="classCVarVector.html">VAR_VECTOR</a> &amp;x);</div><div class="line">};</div><div class="line"></div></div><!-- fragment --><p><code>Cunitcom</code> stores problem instances in the following its members:</p>
<ul>
<li><code>m_iGenNum</code>: number of generators;</li>
<li><code>m_iT</code>: number of periods;</li>
<li><code>m_dQ</code>: level of reliability;</li>
<li><code>m_ipDemand</code>: array of size <code>m_iT</code>, where <code>m_ipDemand[t]</code> is demand in period <code>t</code>;</li>
<li><code>m_ipLoCapacity</code>: array of size <code>m_iGenNum</code>, where <code>m_ipUpCapacity[i]</code> is minimum level of production per one period;</li>
<li><code>m_ipUpCapacity</code>: array of size <code>m_iGenNum</code>, where <code>m_ipUpCapacity[i]</code> is maximum level of production per one period;</li>
<li><code>m_ipRminus</code>, <code>m\_ipRPlus</code>: arrays of size <code>m_iGenNum</code>, where <code>m_ipRminus}[i]</code> and <code>m</code>_ipRPlus[i]<code>are ramping parameters for generator</code>i<code>; -</code>m_ipStartUpCost<code>: array of size</code>m_iGenNum<code>, where</code>m_ipStartUpCost[i]<code>is start-up cost of generator</code>i<code>; -</code>m_ipFixedCost<code>,</code>m_ipUnitCost<code>: array of size</code>m_iGenNum<code>, where</code>m_ipFixedCost[i]<code>and</code>m_ipUnitCost[i]` are fixed and variable costs for generator <em>i</em>.</li>
</ul>
<p>The default constructor of <code>Cunitcom</code> is implemented as follows.</p>
<p><div class="fragment"><div class="line">Cunitcom::Cunitcom(<span class="keyword">const</span> <span class="keywordtype">char</span>* name): <a class="code" href="classCProblem.html">CProblem</a>(name)</div><div class="line">{</div><div class="line">    m_ipDemand=0;</div><div class="line">    <span class="keywordtype">char</span> fileName[128];</div><div class="line">    strcpy(fileName,name);</div><div class="line">    strcat(fileName,<span class="stringliteral">&quot;.txt&quot;</span>);</div><div class="line">    readData(fileName);</div><div class="line">}</div></div><!-- fragment --></p>
<p><code>Cunitcom()</code> just calls the function <code>readData()</code> to read an instance of UCP from a text file which name (without extension <code>.txt</code>) is given by the parameter <code>fileName</code>.</p>
<p><div class="fragment"><div class="line"><span class="keywordtype">void</span> Cunitcom::readData(<span class="keyword">const</span> <span class="keywordtype">char</span>* fileName)</div><div class="line">{</div><div class="line">    std::ifstream fin(fileName);</div><div class="line">    <span class="keywordflow">if</span> (!fin.is_open()) {</div><div class="line">        <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="codeRef" doxygen="/home/nick/programs/mip/mipcl/docs/mipcl.tag:../../../mipcl/docs/html/" href="../../../mipcl/docs/html/classCFileException.html">CFileException</a>(<span class="stringliteral">&quot;Cunitcom::readData&quot;</span>,fileName);</div><div class="line">    }</div><div class="line">    <span class="keywordtype">int</span> n;</div><div class="line">    fin &gt;&gt; n &gt;&gt; m_iT &gt;&gt; m_dQ;</div><div class="line">    m_iGenNum=n;</div><div class="line">    <span class="keywordflow">if</span> (!(m_ipDemand = <span class="keyword">new</span>(std::nothrow) <span class="keywordtype">int</span>[m_iT+7*n])) {</div><div class="line">        <span class="keywordflow">throw</span> <a class="codeRef" doxygen="/home/nick/programs/mip/mipcl/docs/mipcl.tag:../../../mipcl/docs/html/" href="../../../mipcl/docs/html/classCMemoryException.html">CMemoryException</a>(<span class="stringliteral">&quot;Cunitcom::readData&quot;</span>);</div><div class="line">    }</div><div class="line">    </div><div class="line">    m_ipUpCapacity=(m_ipLoCapacity=m_ipDemand+m_iT)+n;</div><div class="line">    m_ipRPlus=(m_ipRminus=m_ipUpCapacity+n)+n; </div><div class="line">    m_ipUnitCost=(m_ipFixedCost=(m_ipStartUpCost=m_ipRPlus+n)+n)+n;</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> t=0; t &lt; m_iT; ++t)</div><div class="line">        fin &gt;&gt;  m_ipDemand[t];</div><div class="line">    </div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; n; ++i)</div><div class="line">        fin &gt;&gt; m_ipLoCapacity[i] &gt;&gt; m_ipUpCapacity[i]</div><div class="line">            &gt;&gt; m_ipRminus[i] &gt;&gt; m_ipRPlus[i]</div><div class="line">            &gt;&gt; m_ipStartUpCost[i] &gt;&gt; m_ipFixedCost[i] &gt;&gt; m_ipUnitCost[i];  </div><div class="line"></div><div class="line">    fin.close();</div><div class="line">} <span class="comment">// end of Cunitcom::readData</span></div></div><!-- fragment --></p>
<p>The instance read from the file is stored in the class members described above. The format of input data will be described later when we discuss an illustrative example. The function also allocates memory for the array members of <code>Cunitcom</code>.</p>
<p>Our <b>MIPshell</b> implementation of MIP (1) is straightforward.</p>
<div class="fragment"><div class="line">#define d(t) m_ipDemand[t]</div><div class="line">#define u(i) m_ipUpCapacity[i]</div><div class="line">#define l(i) m_ipLoCapacity[i]</div><div class="line">#define r1(i) m_ipRminus[i]</div><div class="line">#define r2(i) m_ipRPlus[i]</div><div class="line">#define g(i) m_ipStartUpCost[i]</div><div class="line">#define f(i) m_ipFixedCost[i]</div><div class="line">#define p(i) m_ipUnitCost[i]</div><div class="line"></div><div class="line">int Cunitcom::model()</div><div class="line">{</div><div class="line">    double q=m_dQ;</div><div class="line">    int i,t, n, T;</div><div class="line">    n=m_iGenNum; T=m_iT;</div><div class="line">    VAR_VECTOR x(&quot;x&quot;,BIN,n,T), y(&quot;y&quot;,REAL_GE,n,T), z(&quot;z&quot;,BIN,n,T); </div><div class="line">    </div><div class="line">    minimize(sum(i in [0,n), t in [0,T)) (g(i)*z(i,t) + f(i)* x(i,t) + p(i)* y(i,t)));</div><div class="line">    forall(t in [0,T)) {</div><div class="line">        sum(i in [0,n)) y(i,t) == d(t);</div><div class="line">        sum(i in [0,n)) u(i)*x(i,t) &gt;= q*d(t);</div><div class="line">    }</div><div class="line">    forall(i in [0,n), t in [0,T)) {</div><div class="line">        l(i)*x(i,t) &lt;= y(i,t);</div><div class="line">        y(i,t) &lt;= u(i)*x(i,t);</div><div class="line">        -r1(i) &lt;= y(i,t) - y(i,(t-1+T) % T) &lt;= r2(i);</div><div class="line">        x(i,t) - x(i,(t-1+T) % T) &lt;= z(i,t);</div><div class="line">        z(i,t) &lt;= x(i,t);</div><div class="line">    }</div><div class="line"></div><div class="line">    optimize();</div><div class="line">    printSol(y);</div><div class="line">    return 0;</div><div class="line">} // end of Cunitcom::model</div><div class="line"></div></div><!-- fragment --><p>As usual, we introduced a number of macros to keep our <b>MIPshell</b> model close to formulation (1).</p>
<h2><a class="anchor" id="mipshell_unitComExample"></a>
Illustrative Example</h2>
<p>To test our <code>Cunitcom</code> class, we wrote the following small program.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><span class="preprocessor">#include &quot;unitcom.h&quot;</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keyword">const</span> <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    <span class="keywordflow">try</span> {</div><div class="line">        Cunitcom prob(argv[1]);</div><div class="line">        prob.model();</div><div class="line">    }</div><div class="line">    <span class="keywordflow">catch</span>(<a class="codeRef" doxygen="/home/nick/programs/mip/mipcl/docs/mipcl.tag:../../../mipcl/docs/html/" href="../../../mipcl/docs/html/classCException.html">CException</a>* pe) {</div><div class="line">        std::cerr &lt;&lt; pe-&gt;<a class="codeRef" doxygen="/home/nick/programs/mip/mipcl/docs/mipcl.tag:../../../mipcl/docs/html/" href="../../../mipcl/docs/html/classCException.html#aefac240f575195c800a6d2a84c215afe">what</a>() &lt;&lt; std::endl;</div><div class="line">        <span class="keyword">delete</span> pe;</div><div class="line">        <span class="keywordflow">return</span> 1;</div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"></div></div><!-- fragment --><p>This program solves unit commitment instances written in text files. The contents of an example input file, named <code>test1.txt</code>, is as follows: </p><pre class="fragment"> 5 12 1.2
50 60 50 100 80 70 90 60 50 120 110 70
 2 12 12 12 100  1 10
 2 12 12 12 100  1 10
 5 35 35 35 300  5  4
20 50 50 50 400 10  3
40 75 15 20 800 15  2
</pre><p>Three numbers in the first line show that the problem is to schedule <em>n</em>=5 generators over <em>T</em>=12 time periods of <em>2</em>-hours each. The level of reliability is <em>q</em>=1.2. The second line contains demands for electricity in all 12 periods. Each of the other five lines &mdash; starting from the third &mdash; describes a generator in the following order: minimum and maximum levels of production, two inertia parameters, followed by start-up, fixed and variable costs. Let us note that all five generators are of different types, and the inertia constraints only apply to the fifth generator: <img class="formulaInl" alt="$r^1_5=15,\; r^2_5=20$" src="form_95.png"/> (for other four generators we set <img class="formulaInl" alt="$r^1_i=r^2_i=u_i$" src="form_96.png"/>).</p>
<p>To compile our program, enter the following commands </p><pre class="fragment">cd $MIPCLDIR/examples/unitcom/release
make all
</pre><p>To solve our example, enter the following commands </p><pre class="fragment">cd $MIPCLDIR/examples/unitcom/tests
$MIPCLDIR/examples/bin/unitcom test1
</pre><p>The program writes the solution to the file <code>test1.sol</code>. In a concise form the solution is presented in Table&#160;1.</p>
<center> <a class="anchor" id=""></a>
<table class="doxtable">
<caption>Table 1: <em>Solution to the unit commitment instance</em></caption>
<tr>
<th>Gene- </th><th colspan="12">Periods  </th></tr>
<tr>
<th>rator </th><th>0&ndash;2</th><th>2&ndash;4</th><th>4&ndash;6</th><th>6&ndash;8</th><th>8&ndash;10 </th><th>10&ndash;12</th><th>12&ndash;14</th><th>14&ndash;16</th><th>16&ndash;18</th><th>18&ndash;20 </th><th>20&ndash;22</th><th>22&ndash;24  </th></tr>
<tr>
<th>1 </th><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>0  </td></tr>
<tr>
<th>2 </th><td>0 </td><td>0 </td><td>0 </td><td>2 </td><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>0  </td></tr>
<tr>
<th>3 </th><td>5 </td><td>5 </td><td>5 </td><td>33 </td><td>5 </td><td>5 </td><td>20 </td><td>5 </td><td>5 </td><td>5 </td><td>5 </td><td>10  </td></tr>
<tr>
<th>4 </th><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>50 </td><td>30 </td><td>0  </td></tr>
<tr>
<th>5 </th><td>45 </td><td>55 </td><td>45 </td><td>65 </td><td>75 </td><td>65 </td><td>70 </td><td>55 </td><td>45 </td><td>65 </td><td>75 </td><td>60  </td></tr>
</table>
</center> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
