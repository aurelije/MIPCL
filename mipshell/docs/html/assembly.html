<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MIPschell: Balancing Assembly Lines</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MIPschell
   &#160;<span id="projectnumber">1.4.0</span>
   </div>
   <div id="projectbrief">A language for writing Mixed Integer Programs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Balancing Assembly Lines </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="mipshell_assemblyLines"></a>
Balancing Assembly Lines</h1>
<p>Assembly lines are special product-layout production systems that are typical for the industrial production of high quantity standardized commodities. An assembly line consists of a number of work stations arranged along a conveyor belt. The work pieces are consecutively launched down the conveyor belt and are moved from one station to the next. At each station, one or several tasks necessary to manufacture the product are performed. The tasks in an assembly process are typically ordered, i.e. there may be precedence requirements that must be enforced. The problem of distributing the tasks among the stations with respect to some objective function is called the <em>assembly line balancing problem</em> (ALBP). We will consider here the simple assembly line balancing problem which is the core of many other ALBP's.</p>
<p>The manufacturing of some product consists of a set of <em>tasks</em> <img class="formulaInl" alt="$\mathcal{T}=\{1,\dots,n\}$" src="form_27.png"/>. We denote by <img class="formulaInl" alt="$t_j$" src="form_28.png"/> the processing time of task <img class="formulaInl" alt="$j\in {\cal T}$" src="form_29.png"/>. There are precedence relations between tasks that are represented by a digraph <img class="formulaInl" alt="$G = ({\cal T},E)$" src="form_30.png"/>, where <img class="formulaInl" alt="$(j_1,j_2) \in E$" src="form_31.png"/> means that task <img class="formulaInl" alt="$j_1$" src="form_32.png"/> is an immediate predecessor of task <img class="formulaInl" alt="$j_2$" src="form_33.png"/>. Suppose that the demand for the product is such that the assembly line must have a cycle time <em>C</em>. Thus the running time of each station must not exceed the cycle time.</p>
<p>The <em>simple assembly line balancing problem</em> (SALBP) is to decide what is the minimum number of stations that is enough for the line running with the given cycle time to fulfill all the operations in an order consistent with the precedence relation.</p>
<p>An example of SALBP is presented in Figure 1.</p>
<div class="image">
<img src="assembly.png" alt="assembly.png"/>
<div class="caption">
Figure 1: Example of SALBP</div></div>
 Here vertices represent operations, and number over vertices are operation processing times.</p>
<p>To formulate SALBP as an IP, we need to know an upper bound, <em>m</em>, of the number of needed stations. In particular, we can set <em>m</em> to be the the number of station in a solution build by one of the heuristics developed for solving SALBPs.</p>
<p>For example, let us consider the heuristic that assigns operations, respecting precedence relations, first to Station 1, then to Station 2, and so on until all the operations have been assigned to the stations. If we apply this heuristic to the example of Figure 1 when the cycling time is 45, we get the following assignment:</p><ul>
<li>operations 1 and 2 are accomplished by Station 1,</li>
<li>operations 3, 4, 5, and 6 &mdash; by Station 2,</li>
<li>operations 7, 8, and 9 &mdash; by Station 3,</li>
<li>operations 10 and 11 &mdash; by Station 4.</li>
</ul>
<p>So in this example <em>m</em> can set to 4.</p>
<p>Let us also note that this heuristic solution is not optimal as there exists an assignment that uses only three stations:</p><ul>
<li>operations 1, 3, 5, and 6 are accomplished by Station 1,</li>
<li>operations 2, 4, and 7 &mdash; by Station 2,</li>
<li>operations 8, 9, 10, and 11 &mdash; by Station 3.</li>
</ul>
<h2><a class="anchor" id="mipshell_assemblyLineMIP"></a>
MIP formulation</h2>
<p>We introduce the following variables:</p><ul>
<li><img class="formulaInl" alt="$y_i=1$" src="form_34.png"/> if station <em>i</em> is open (used), <img class="formulaInl" alt="$y_i=0$" src="form_35.png"/> otherwise;</li>
<li><img class="formulaInl" alt="$x_{ij}$" src="form_36.png"/> if task <em>j</em> is assigned to station <em>i</em>, <img class="formulaInl" alt="$x_{ij}=0$" src="form_37.png"/> otherwise;</li>
<li><img class="formulaInl" alt="$z_j=i$" src="form_38.png"/> if task <em>j</em> is assigned to station <em>i</em>.</li>
</ul>
<p>With these variables the model is </p><p class="formulaDsp">
<img class="formulaDsp" alt="\begin{align} \sum_{i=1}^m y_i &amp;\to \min \tag{3.a}\\ \sum_{i=1}^m x_{ij} &amp;= 1,\quad j=1,\dots,n, \tag{1.b}\\ \sum_{j=1}^n t_j x_{ij} &amp;\le Cy_i,\quad i=1,\dots,m, \tag{1.c}\\ \sum_{i=1}^m i\,x_{ij} &amp;= z_j,\quad j=1,\dots,n, \tag{1.d}\\ z_{j_1} &amp;\le z_{j_2},\quad (j_1,j_2)\in E, \tag{1.e}\\ y_{i-1} &amp;\ge y_i,\quad i=2,\dots,m, \tag{1.f}\\ x_{ij} &amp;\le y_i,\quad j=1,\dots,n;\; i=1,\dots,m,\tag{1.g} \label{eq:LBstationPrec2}\\ x_{ij} &amp;\in \{0,1\},\quad i=1,\dots,m;\; j=1,\dots,n,\tag{1.h}\\ y_i&amp;\in \{0,1\},\quad i=1,\dots,m,\tag{1.i}\\ z_j &amp;\ge 0,\quad j=1,\dots,n.\tag{1.j} \label{eq:LBz} \end{align}" src="form_39.png"/>
</p>
<p>The objective (1.a) is to minimize the number of open stations. The constraints (1.b) induce that each task is assign to exactly one station. The capacity constraints (1.c) enforce that the total running time of each open stations does not exceed the cycle time. The constraints (1.d) establish the relation between the assignment variables, binary <em>x</em> and integer <em>z</em>. The precedence relation constraints (1.e) induce that, for any pair <img class="formulaInl" alt="$(j_1,j_2)\in E$" src="form_40.png"/> of related tasks, task <img class="formulaInl" alt="$j_1$" src="form_32.png"/> is assigned to the same or an earlier station than task <img class="formulaInl" alt="$j_2$" src="form_33.png"/>; this guaranties that task <img class="formulaInl" alt="$j_1$" src="form_32.png"/> can be processed before task <img class="formulaInl" alt="$j_2$" src="form_33.png"/> starts. The constraints (1.f) and (1.g) enforce that earlier stations are opened first.</p>
<h2><a class="anchor" id="mipshell_assemblyLinesImpl"></a>
MIPshell implementation</h2>
<p>To solve problem (1), we developed a <b>C++</b> class named <code>Cassembly</code> and defined as follows.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="mipshell_8h.html">mipshell.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">class </span>Cassembly: <span class="keyword">public</span> <a class="code" href="classCProblem.html">CProblem</a></div><div class="line">{</div><div class="line">    <span class="keywordtype">int</span> m_iStNum, m_iOpNum, m_iRelNum, m_iCycleTime;</div><div class="line">    <span class="keywordtype">int</span> *m_ipTime, *m_ipPrec, *m_ipSucc;</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    Cassembly(<span class="keyword">const</span> <span class="keywordtype">char</span>* name);</div><div class="line"><span class="preprocessor">#ifndef __ONE_THREAD_</span></div><div class="line">    Cassembly(<span class="keyword">const</span> Cassembly &amp;other, <span class="keywordtype">int</span> thread);</div><div class="line">    <a class="codeRef" doxygen="/home/nick/programs/mip/mipcl/docs/mipcl.tag:../../../mipcl/docs/html/" href="../../../mipcl/docs/html/classCMIP.html">CMIP</a>* <a class="code" href="classCProblem.html#a652138eae3153e0bbb7a8e78cb488600">clone</a>(<span class="keyword">const</span> <a class="codeRef" doxygen="/home/nick/programs/mip/mipcl/docs/mipcl.tag:../../../mipcl/docs/html/" href="../../../mipcl/docs/html/classCMIP.html">CMIP</a> *pMip, <span class="keywordtype">int</span> thread);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">    <span class="keyword">virtual</span> ~Cassembly();</div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> model();</div><div class="line">    </div><div class="line">    <span class="keywordtype">void</span> readData(<span class="keyword">const</span> <span class="keywordtype">char</span>* fileName);</div><div class="line">    <span class="keywordtype">void</span> printSol(<a class="code" href="classCVarVector.html">VAR_VECTOR</a> &amp;x);</div><div class="line"></div><div class="line">};</div><div class="line"></div></div><!-- fragment --><p><code>Cassembly</code> has the following members for storing an instance of SALBP:</p><ul>
<li><code>m_iOpNum</code>: number of operations;</li>
<li><code>m_iStNum</code>: number of stations;</li>
<li><code>m_iRewlNum</code>: number of precedence relations;</li>
<li><code>m_iCycleTime</code>: cycle time;</li>
<li><code>m_ipTime</code>: integer array of size <code>m_iOpNum</code>, where <code>m_ipTime[j]</code> is processing time of operation <code>j</code>;</li>
<li><code>m_ipPrec</code> and <code>m_ipSucc</code>: integer arrays of size <code>m_iRelNum</code>, where operation <code>m_ipPrec[i]</code> precedes operation <code>m_ipSucc[i]</code>.</li>
</ul>
<p>Next, we discuss the implementation of the constructors and the destructor of <code>Cmultlotsize</code>.</p>
<p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;cstring&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;cmath&gt;</span></div><div class="line"></div><div class="line">Cassembly::Cassembly(<span class="keyword">const</span> <span class="keywordtype">char</span>* name): <a class="code" href="classCProblem.html">CProblem</a>(name)</div><div class="line">{</div><div class="line">    m_ipTime=m_ipPrec=0;</div><div class="line">    <span class="keywordtype">char</span> fileName[128];</div><div class="line">    strcpy(fileName,name);</div><div class="line">    strcat(fileName,<span class="stringliteral">&quot;.txt&quot;</span>);</div><div class="line">    readData(fileName);</div><div class="line">}</div></div><!-- fragment --></p>
<p>This constructor set to zero the values of two pointer, <code>m_ipTime</code> and <code>m_ipPrec</code>, that point to memory blocks allocated in <code>readData()</code> for storing, respectively, processing times and precedence relations. Next <code>readData(fileName)</code> is called to read input data from the file which name is given by the only input parameter, <code>name</code>, appended with the extension <code>.txt</code>.</p>
<p>The implementations of the copy and clone constructors are standard.</p>
<p><div class="fragment"><div class="line">Cassembly::Cassembly(<span class="keyword">const</span> Cassembly &amp;other, <span class="keywordtype">int</span> thread): <a class="code" href="classCProblem.html">CProblem</a>(other,thread)</div><div class="line">{</div><div class="line">}</div><div class="line"></div><div class="line"><a class="codeRef" doxygen="/home/nick/programs/mip/mipcl/docs/mipcl.tag:../../../mipcl/docs/html/" href="../../../mipcl/docs/html/classCMIP.html">CMIP</a>* Cassembly::clone(<span class="keyword">const</span> <a class="codeRef" doxygen="/home/nick/programs/mip/mipcl/docs/mipcl.tag:../../../mipcl/docs/html/" href="../../../mipcl/docs/html/classCMIP.html">CMIP</a> *pMip, <span class="keywordtype">int</span> thread)</div><div class="line">{</div><div class="line">    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/nick/programs/mip/mipcl/docs/mipcl.tag:../../../mipcl/docs/html/" href="../../../mipcl/docs/html/classCMIP.html">CMIP</a>*<span class="keyword">&gt;</span>(<span class="keyword">new</span> Cassembly(*static_cast&lt;Cassembly*&gt;(const_cast&lt;CMIP*&gt;(pMip)),thread));</div><div class="line">}</div><div class="line"><span class="preprocessor">#endif</span></div></div><!-- fragment --></p>
<p>The destructor frees the memory allocated in <code>readData()</code>.</p>
<p><div class="fragment"></div><!-- fragment --></p>
<p>The implementation of <code>readData()</code> given below is straightforward, and, looking through the code, you can easily guess the structure of input files.</p>
<p><div class="fragment"></div><!-- fragment --></p>
<p>Our _MIPshell__ implementation of MIP (1) is straightforward.</p>
<p><div class="fragment"><div class="line"><span class="preprocessor">#define prec(e) m_ipPrec[e]</span></div><div class="line"><span class="preprocessor">#define succ(e) m_ipSucc[e]</span></div><div class="line"><span class="preprocessor">#define t(j) m_ipTime[j]</span></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> Cassembly::model()</div><div class="line">{</div><div class="line">    <span class="keywordtype">int</span> i,j, n=m_iOpNum, m=m_iStNum, q=m_iRelNum, C=m_iCycleTime;</div><div class="line">    <a class="code" href="classCVarVector.html">VAR_VECTOR</a> x(<span class="stringliteral">&quot;x&quot;</span>,<a class="code" href="Var_8h.html#a1cec2e482ee71e7e701a8ef2025f8ebaa3dba92f17ebb0d7efe6056d51e9acdc7">BIN</a>,m,n), y(<span class="stringliteral">&quot;y&quot;</span>,<a class="code" href="Var_8h.html#a1cec2e482ee71e7e701a8ef2025f8ebaa3dba92f17ebb0d7efe6056d51e9acdc7">BIN</a>,m), z(<span class="stringliteral">&quot;z&quot;</span>,<a class="code" href="Var_8h.html#a1cec2e482ee71e7e701a8ef2025f8ebaa3e58089cdeaafd3168fd5c68f146ef81">REAL_GE</a>,n);</div><div class="line"></div><div class="line">    minimize(sum(i in [0,m)) y(i));</div><div class="line">    forall(j in [0,n)) {</div><div class="line">        sum(i in [0,m)) x(i,j) == 1;</div><div class="line">        sum(i in [0,m)) (i+1)*x(i,j) == z(j);</div><div class="line">    }</div><div class="line">    forall(i in [0,m)) {</div><div class="line">        sum(j in [0,n)) t(j)* x(i,j) &lt;= C*y(i);</div><div class="line">        forall(j in [0,n))</div><div class="line">            x(i,j) &lt;= y(i);</div><div class="line">    }</div><div class="line">    forall(i in [0,q))</div><div class="line">        z(prec(i)) &lt;= z(succ(i));</div><div class="line">        </div><div class="line">    forall(i in [1,m))</div><div class="line">        y(i-1) &gt;= y(i);</div><div class="line"></div><div class="line">    optimize();</div><div class="line">    printSol(x);</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">} <span class="comment">// end of Cassembly::model()</span></div></div><!-- fragment --></p>
<p>To improve readability of the model, we introduced a few macros. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
