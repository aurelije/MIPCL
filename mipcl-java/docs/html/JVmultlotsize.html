<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JVmipcl: Multiproduct Lot-Sizing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="MIPCLlogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JVmipcl
   &#160;<span id="projectnumber">1.4.0</span>
   </div>
   <div id="projectbrief">Mixed Integer Programming Class Library: java backend</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Multiproduct Lot-Sizing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="sec_JVmultlotsize"></a>
Multiproduct Lot-Sizing</h1>
<p>Production process</p><ul>
<li>transforms raw materials into end products;</li>
<li>usually there a series of transformation steps;</li>
<li>each step consuming and producing intermediate products;</li>
<li>raw materials, intermediate and end products may be inventoried.</li>
</ul>
<p>We need to determine an aggregate production plan for <em>n</em> different products on a number of machines of <em>m</em> types for a planning horizon that extends over <em>T</em> periods.</p>
<p>Inputs parameters:</p><ul>
<li><img class="formulaInl" alt="$l_t$" src="form_86.png"/>: duration (length) of period <em>t</em>;</li>
<li><img class="formulaInl" alt="$m_{it}$" src="form_87.png"/>: number of machines of type~$i$ available in period <em>t</em>;</li>
<li><img class="formulaInl" alt="$f_{it}$" src="form_88.png"/>: fixed cost of producing on machine of type <em>i</em> in period <em>t</em>;</li>
<li><img class="formulaInl" alt="$T^{\mathrm{min}}_{i}, T^{\mathrm{max}}_{i}$" src="form_89.png"/>: minimum and maximum working time of one machine of type <em>i</em>;</li>
<li><img class="formulaInl" alt="$c_{jt}$" src="form_90.png"/>: per unit production cost of product <em>j</em> in period <em>t</em>;</li>
<li><img class="formulaInl" alt="$h_{jt}$" src="form_91.png"/>: inventory holding cost per unit of product <em>j</em> in period <em>t</em>;</li>
<li><img class="formulaInl" alt="$d_{jt}$" src="form_92.png"/>: demand for product <em>j</em> in period <em>t</em>;</li>
<li><img class="formulaInl" alt="$\rho_{jk}$" src="form_93.png"/>: number of units of product <em>j</em> used for producing one unit of product <em>k</em>;</li>
<li><img class="formulaInl" alt="$\tau_{ij}$" src="form_94.png"/>: per unit production time of product <em>j</em> on machine of type <em>i</em>;</li>
<li><img class="formulaInl" alt="$s^i_j$" src="form_95.png"/>: initial stock of product <em>j</em> at the beginning of the planning horizon.</li>
<li><img class="formulaInl" alt="$s^f_j$" src="form_96.png"/>: final stock of product <em>j</em> at the end of the planning horizon.</li>
</ul>
<p>We need to determine the production levels for each product and each period so that to minimize the total production and inventory expenses over planing horizon.</p>
<p>We introduce the following variables</p><ul>
<li><img class="formulaInl" alt="$x_{jt}$" src="form_97.png"/>: amount of product <em>j</em>, produced in period <em>t</em>;</li>
<li><img class="formulaInl" alt="$s_{jt}$" src="form_98.png"/>: amount of product <em>j</em> in stock at the end of period <em>t</em>;</li>
<li><img class="formulaInl" alt="$y_{it}$" src="form_99.png"/>: number of machunes of type <em>i</em> working in period <em>t</em>.</li>
</ul>
<p>Now we formulate the problem as follows: </p><p class="formulaDsp">
<img class="formulaDsp" alt="\begin{align} &amp; \sum_{t=1}^T\sum_{j=1}^n \left(h_{jt}\, s_{jt} + c_{jt}\, x_{jt}\right) + \sum_{t=1}^T\sum_{i=1}^m f_{it}\, y_{it} \to \min, \tag{1.a}\\ &amp; s^i_j + x_{j1} = d_{j1} + s_{j1} + \sum_{k=1}^n \rho_{jk}\, x_{k,1},\quad j=1,\dots,n, \tag{1.b}\\ &amp; s_{j,t-1} + x_{jt} = d_{jt} + s_{jt} + \sum_{k=1}^n \rho_{jk}\, x_{k,t}, \notag \\ &amp; \phantom{xxxxxxxxxxxxxxxxxxxxx} j=1,\dots,n;\; t=2,\dots,T, \tag{1.c}\\ &amp; \sum_{j=1}^n \tau_{ij}\, x_{jt} \le l_t y_{it},\quad i=1,\dots,m;\; t=1,\dots,T, \tag{1.d}\\ &amp; s_{jT} = s^f_j,\quad j=1,\dots,n,\tag{1.e}\\ &amp; 0\le s_{jt}\le u_j,\; x_{jt}\ge 0,\quad j=1,\dots,n;\; t=1,\dots,T, \tag{1.f}\\ &amp; 0\le y_{it}\le m_{it},\; y_{it} \in \mathbb{Z},\quad i=1,\dots,m;\; t=1,\dots,T. \tag{1.g} \end{align}" src="form_100.png"/>
</p>
<p>The objective (1.a) prescribes to minimize the total production and inventory expenses.</p>
<p>The balance equations (1.b) and (1.c) join two adjacent periods: product in stock in period <em>t</em>-1 plus that produced in period <em>t</em> equals the demand in period <em>t</em> plus the amount of product used when producing other products, and plus the amount in stock in period <em>t</em>.</p>
<p>The inequalities (1.d) require that the working time of machines of any type be withing given limits; besides, if machine <em>i</em> does not work in period <em>t</em> ( <img class="formulaInl" alt="$y_{it}=0$" src="form_101.png"/>), then no product is produced by this machine (all <img class="formulaInl" alt="$x_{jt}=0$" src="form_102.png"/>).</p>
<p>The equations (1.e) set the values of final product stocks.</p>
<h2><a class="anchor" id="mipshell_multLotSizeImpl"></a>
MIPshell implementation</h2>
<p>In our implementation of model (1) instances of the Multiproduct Lot-Sizing problem are represented as objects of class <code>Task</code>. The latter describes machines as follows.</p>
 <div class="fragment"><div class="line"><span class="keyword">package </span>multlotsizing;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.Collections;</div><div class="line"><span class="keyword">import</span> java.util.Map;</div><div class="line"><span class="keyword">import</span> java.util.Set;</div><div class="line"></div><div class="line"><span class="keyword">class </span>Machine {</div><div class="line">        String name;</div><div class="line"></div><div class="line">        <span class="keywordtype">int</span>[] available;</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span>[] cost;</div><div class="line"></div><div class="line">        <span class="keywordtype">int</span> getMachineNum(<span class="keywordtype">int</span> t)</div><div class="line">        {<span class="keywordflow">return</span> available[t];}</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span> getcost(<span class="keywordtype">int</span> t)</div><div class="line">        {<span class="keywordflow">return</span> cost[t];}</div><div class="line">} <span class="comment">// end od Machine</span></div></div><!-- fragment --> The members of this class are:</p><ul>
<li><em>name</em>: machine name;</li>
<li><em>available</em>: <code>available[t]</code> is number of machines of this type available in period <code>t</code>;</li>
<li><em>cost</em>: <code>cost[t]</code> is cost of using one machine of this type in period <code>t</code>.</li>
</ul>
<p>The products are described as below.</p>
<p><div class="fragment"><div class="line"><span class="keyword">class </span>Product {</div><div class="line"></div><div class="line">        String name;</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span> initStock;</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span> finalStock;</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span> capacity;</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span>[] demands;</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span>[] costs;</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span>[] holdingCosts;</div><div class="line"></div><div class="line">        Map&lt;Integer,Double&gt; procTimes;</div><div class="line"></div><div class="line">        Map&lt;Integer,Double&gt; resources;</div><div class="line"></div><div class="line"><span class="comment">// Attributes </span></div><div class="line">        <span class="keywordtype">double</span> getinitStock()</div><div class="line">        {<span class="keywordflow">return</span> initStock;}</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span> getfinalStock()</div><div class="line">        {<span class="keywordflow">return</span> finalStock;}</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span> getcapacity()</div><div class="line">        {<span class="keywordflow">return</span> capacity;}</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span>[] getdemands()</div><div class="line">        {<span class="keywordflow">return</span> demands;}</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span>[] getcosts()</div><div class="line">        {<span class="keywordflow">return</span> costs;}</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span>[] getholdingCosts()</div><div class="line">        {<span class="keywordflow">return</span> holdingCosts;}</div><div class="line"></div><div class="line">        Map&lt;Integer,Double&gt; getprocTimes()</div><div class="line">        {<span class="keywordflow">return</span> procTimes;}</div><div class="line"></div><div class="line">        Map&lt;Integer,Double&gt; getresources()</div><div class="line">        {<span class="keywordflow">return</span> resources;}</div><div class="line">} <span class="comment">// end of Product</span></div></div><!-- fragment --> The members of this class are:</p><ul>
<li><em>name</em>: product name;</li>
<li><em>initStock</em>: init stock;</li>
<li><em>finalStock</em>: final stock;</li>
<li><em>capacity</em>: storage capacity;</li>
<li><em>demands</em>: <code>demands[t]</code> is demand for this product in period <code>t</code>;</li>
<li><em>costs</em>: <code>costs[t]</code> is unit production cost in period <code>t</code>;</li>
<li><em>holdingCosts</em>: <code>holdingCosts[t]</code> is holding cost in period <code>t</code>;</li>
<li><em>procTimes</em>: processing times; the keys are machines capable of producing this product; <code>pocTimes.get(i)</code> is time needed to produce one unit of this product on machine <code>i</code>;</li>
<li><em>resources</em>: used resources (other products); the keys are products used in production of this product; <code>resources.get(k)</code> is number of unit of resource <code>k</code> used to produce one of this product.</li>
</ul>
<p>Next we present our implementation of the <code>Task</code> class. <div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">class </span>Task</div><div class="line">{</div><div class="line">        <span class="keywordtype">int</span>[] l;</div><div class="line"></div><div class="line">        Machine[] machines;</div><div class="line"></div><div class="line">        Product[] products;</div><div class="line"></div><div class="line"><span class="comment">// Attributes</span></div><div class="line"><span class="comment"></span>        <span class="keywordtype">int</span> getHorizonLength()</div><div class="line">        {<span class="keywordflow">return</span> l.length;}</div><div class="line"></div><div class="line">        <span class="keywordtype">int</span> getPeriodLength(<span class="keywordtype">int</span> t)</div><div class="line">        {<span class="keywordflow">return</span> l[t];}</div><div class="line"></div><div class="line">        <span class="keywordtype">int</span> getMachineNum()</div><div class="line">        {<span class="keywordflow">return</span> machines.length;}</div><div class="line"></div><div class="line">        <span class="keywordtype">int</span> getMachineNum(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> t)</div><div class="line">        {<span class="keywordflow">return</span> machines[i].getMachineNum(t);}</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span> getMachineCost(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> t)</div><div class="line">        {<span class="keywordflow">return</span> machines[i].getcost(t);}</div><div class="line"></div><div class="line">        <span class="keywordtype">int</span> getProductNum()</div><div class="line">        {<span class="keywordflow">return</span> products.length;}</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span> getinitStock(<span class="keywordtype">int</span> j)</div><div class="line">        {<span class="keywordflow">return</span> products[j].getinitStock();}</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span> getfinalStock(<span class="keywordtype">int</span> j)</div><div class="line">        {<span class="keywordflow">return</span> products[j].getfinalStock();}</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span> getcapacity(<span class="keywordtype">int</span> j)</div><div class="line">        {<span class="keywordflow">return</span> products[j].getcapacity();}</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span> getcost(<span class="keywordtype">int</span> j, <span class="keywordtype">int</span> t)</div><div class="line">        {<span class="keywordflow">return</span> products[j].getcosts()[t];}</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span> getholdingCost(<span class="keywordtype">int</span> j, <span class="keywordtype">int</span> t)</div><div class="line">        {<span class="keywordflow">return</span> products[j].getholdingCosts()[t];}</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span> getdemand(<span class="keywordtype">int</span> j, <span class="keywordtype">int</span> t)</div><div class="line">        {<span class="keywordflow">return</span> products[j].getdemands()[t];}</div><div class="line"></div><div class="line">        Set&lt;Integer&gt; M(<span class="keywordtype">int</span> j) {</div><div class="line">                Map&lt;Integer,Double&gt; times = products[j].getprocTimes(); </div><div class="line">                <span class="keywordflow">return</span> (times != null)? times.keySet(): Collections.emptySet();</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span> getprocTime(<span class="keywordtype">int</span> j, <span class="keywordtype">int</span> i)</div><div class="line">        {<span class="keywordflow">return</span> products[j].getprocTimes().get(i);}</div><div class="line"></div><div class="line">        Set&lt;Integer&gt; R(<span class="keywordtype">int</span> j) {</div><div class="line">                Map&lt;Integer,Double&gt; res=products[j].getresources();</div><div class="line">                <span class="keywordflow">return</span> (res != null)? res.keySet(): Collections.emptySet();</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordtype">double</span> getResUsed(<span class="keywordtype">int</span> j, <span class="keywordtype">int</span> k)</div><div class="line">        {<span class="keywordflow">return</span> products[j].getresources().get(k);}</div><div class="line">} <span class="comment">// end of Task</span></div></div><!-- fragment --> The members of the <code>Task</code> class are:</p><ul>
<li><em>l</em>: represents time horizon of <code>T=l.length</code> periods, <code>l[t]</code> is length (duration) of period <code>t</code>;</li>
<li><em>machines</em>: array of machines;</li>
<li><em>products</em>: array of products.</li>
</ul>
<p>Here we do not discuss the get and set methods of all classes as their implementations are trivial.</p>
<p>Now we are ready to present the class, named <code>Multlotsize</code>, that implements MIP (1).  <div class="fragment"><div class="line"><span class="keyword">package </span>multlotsizing;</div><div class="line"></div><div class="line"><span class="keyword">import</span> <a class="code" href="namespaceby.html">by</a>.<a class="code" href="namespaceby_1_1bsu.html">bsu</a>.<a class="code" href="namespaceby_1_1bsu_1_1JVmipshell.html">JVmipshell</a>.*;</div><div class="line"><span class="keyword">import</span> java.io.<a class="code" href="classjava_1_1io_1_1IOException.html">IOException</a>;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.Collections;</div><div class="line"><span class="keyword">import</span> java.util.HashMap;</div><div class="line"><span class="keyword">import</span> java.util.Map;</div><div class="line"><span class="keyword">import</span> java.util.Set;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">class </span>Multlotsize <span class="keyword">extends</span> MIPshell</div><div class="line">{</div><div class="line">        Task task;</div><div class="line">        VarVector s, x, y;</div></div><!-- fragment --> The data members of <code>Multlotsize</code> are:</p><ul>
<li><em>task</em>: object of the <code>Task</code> class that stores an instance of Multiproduct Lot-Sizing problem;</li>
<li><em>x,y,s</em>: references to <code>VarVector</code> objects that are build in <code>model()</code> and later used in <code>printSolution()</code> to display an optimal solution.</li>
</ul>
<p><code>Multlotsize</code> also defines a number of simple functions that map input parameters into corresponding paramters of MIP (1). <div class="fragment"><div class="line">        <span class="keywordtype">int</span> l(<span class="keywordtype">int</span> t) {<span class="keywordflow">return</span> task.getPeriodLength(t);}</div><div class="line">        <span class="keywordtype">double</span> s0(<span class="keywordtype">int</span> j) {<span class="keywordflow">return</span> task.getinitStock(j);}</div><div class="line">        <span class="keywordtype">double</span> sf(<span class="keywordtype">int</span> j) {<span class="keywordflow">return</span> task.getfinalStock(j);}</div><div class="line">        <span class="keywordtype">double</span> u(<span class="keywordtype">int</span> j) {<span class="keywordflow">return</span> task.getcapacity(j);}</div><div class="line">        <span class="keywordtype">double</span> c(<span class="keywordtype">int</span> j, <span class="keywordtype">int</span> t) {<span class="keywordflow">return</span> task.getcost(j,t);}</div><div class="line">        <span class="keywordtype">double</span> h(<span class="keywordtype">int</span> j, <span class="keywordtype">int</span> t) {<span class="keywordflow">return</span> task.getholdingCost(j,t);}</div><div class="line">        <span class="keywordtype">double</span> d(<span class="keywordtype">int</span> j, <span class="keywordtype">int</span> t) {<span class="keywordflow">return</span> task.getdemand(j,t);}</div><div class="line">        <span class="keywordtype">double</span> tau(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> j) {<span class="keywordflow">return</span> task.getprocTime(j,i);}</div><div class="line">        Set&lt;Integer&gt; M(<span class="keywordtype">int</span> j) {<span class="keywordflow">return</span> task.M(j);}</div><div class="line">        <span class="keywordtype">double</span> rho(<span class="keywordtype">int</span> j, <span class="keywordtype">int</span> k) {<span class="keywordflow">return</span> task.getResUsed(j,k);}</div><div class="line">        Set&lt;Integer&gt; R(<span class="keywordtype">int</span> j) {<span class="keywordflow">return</span> task.R(j);}</div><div class="line">        <span class="keywordtype">int</span> m(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> t) {<span class="keywordflow">return</span> task.getMachineNum(i,t);}</div><div class="line">        <span class="keywordtype">double</span> f(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> t) {<span class="keywordflow">return</span> task.getMachineCost(i,t);}</div></div><!-- fragment --></p>
<p><code>Multlotsize</code> has two simple constructors. <div class="fragment"><div class="line">        <span class="keyword">public</span> Multlotsize(String name)</div><div class="line">        {</div><div class="line">                super(name);</div><div class="line">                task = null;</div><div class="line">                s = null; x = null; y = null;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">public</span> Multlotsize(String name, Task task)</div><div class="line">        {</div><div class="line">                super(name);</div><div class="line">                model(task);</div><div class="line">        } <span class="comment">// end of Multlotsize(String name, Task task)</span></div></div><!-- fragment --></p>
<p>MIP (1) is implemented in the function named <code>model()</code>, which will be discussed in details. <div class="fragment"><div class="line">        <span class="keywordtype">void</span> model(Task task)</div><div class="line">        {</div><div class="line">                this.task =task;</div><div class="line">                <span class="keywordtype">int</span> T = task.getHorizonLength();</div><div class="line">                <span class="keywordtype">int</span> m = task.getMachineNum();</div><div class="line">                <span class="keywordtype">int</span> n = task.getProductNum();</div><div class="line"></div><div class="line">                VarVector s = <span class="keyword">new</span> VarVector(<span class="keyword">this</span>,<span class="stringliteral">&quot;s&quot;</span>,0,n,T);</div><div class="line">                VarVector x = <span class="keyword">new</span> VarVector(<span class="keyword">this</span>,<span class="stringliteral">&quot;x&quot;</span>,VAR_INT,n,T);</div><div class="line">                VarVector y = <span class="keyword">new</span> VarVector(<span class="keyword">this</span>,<span class="stringliteral">&quot;y&quot;</span>,VAR_INT,m,T);</div><div class="line">                this.s = s; this.x = x; this.y =y;</div></div><!-- fragment --> The only input parameter of <code>model()</code> is a reference to an object of type <code>Task</code>. The function starts with declaring three vectors of variables, $s$, $x$, and $y$.</p>
<p>Next the objective is posed. <div class="fragment"><div class="line">                LinSum lsum = <span class="keyword">new</span> LinSum();</div><div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> t=0; t &lt; T; ++t) {</div><div class="line">                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j &lt; n; ++j)</div><div class="line">                                lsum.add(c(j,t),x.get(j,t))</div><div class="line">                                    .add(h(j,t),s.get(j,t)); </div><div class="line">                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; m; ++i)</div><div class="line">                                lsum.add(f(i,t),y.get(i,t));</div><div class="line">                }</div><div class="line">                minimize(lsum);</div></div><!-- fragment --></p>
<p>Then the balance constraints (1.b) are written <div class="fragment"><div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j &lt; n; ++j) {</div><div class="line">                        lsum = <span class="keyword">new</span> LinSum();</div><div class="line">                        lsum.add(1.0,x.get(j,0))</div><div class="line">                            .add(-1.0,s.get(j,0));</div><div class="line">                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k &lt; n; ++k) {</div><div class="line">                                <span class="keywordflow">if</span> (R(k).contains(j))</div><div class="line">                                        lsum.add(-rho(k,j),x.get(k,0));</div><div class="line">                        }</div><div class="line">                        addCtr(lsum,d(j,0)-s0(j),d(j,0)-s0(j));</div><div class="line">                } <span class="comment">// for (int j=0; j &lt; n; ++j)</span></div></div><!-- fragment --> followed by the balance constraints (1.c) <div class="fragment"><div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> t=1; t &lt; T; ++t) {</div><div class="line">                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j &lt; n; ++j) {</div><div class="line">                                lsum = <span class="keyword">new</span> LinSum();</div><div class="line">                                lsum.add(1.0,s.get(j,t-1))</div><div class="line">                                    .add(1.0,x.get(j,t))</div><div class="line">                                    .add(-1.0,s.get(j,t)); <span class="comment">// s(j,t-1) + x(j,t) - s(j,t)</span></div><div class="line">                                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k=0; k &lt; n; ++k) {</div><div class="line">                                        <span class="keywordflow">if</span> (R(k).contains(j))</div><div class="line">                                                lsum.add(-rho(k,j),x.get(k,t));</div><div class="line">                                }</div><div class="line">                                addCtr(lsum,d(j,t),d(j,t));</div><div class="line">                        }</div><div class="line">                } <span class="comment">// for (int t=1; t &lt; T; ++t)</span></div></div><!-- fragment --></p>
<p>The other constraints, (1.d), (1.e) and (1.f), are implemented in the following loop. <div class="fragment"><div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; m; ++i) {</div><div class="line">                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> t=0; t &lt; T; ++t) {</div><div class="line">                                y.get(i,t).setub(m(i,t));</div><div class="line">                                lsum = <span class="keyword">new</span> LinSum();</div><div class="line">                                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j &lt; n; ++j) {</div><div class="line">                                        <span class="keywordflow">if</span> (M(j).contains(i))</div><div class="line">                                                lsum.add(tau(i,j),x.get(j,t));</div><div class="line">                                }</div><div class="line">                                addCtr(lsum.add(-l(t),y.get(i,t)),-VAR_INF,0.0);</div><div class="line">                        }</div><div class="line">                } <span class="comment">// for (int i=0; i &lt; m; ++i)</span></div></div><!-- fragment --></p>
<p>The last loop imposes bounds on the stock variables. <div class="fragment"><div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j &lt; n; ++j) {</div><div class="line">                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> t=0; t &lt; T-1; ++t) {</div><div class="line">                                s.get(j,t).setub(u(j));</div><div class="line">                        }</div><div class="line">                        s.get(j,T-1).setbounds(sf(j),sf(j));</div><div class="line">                }</div><div class="line">        } <span class="comment">// end of model()</span></div></div><!-- fragment --></p>
<p>To print solutions in a more readable form, <code>Multlotsize</code> overrides the function <code>printSolution()</code> of the base class <code>MIPshell</code>. <div class="fragment"><div class="line">        <span class="keyword">static</span> String repeatChar(String c, <span class="keywordtype">int</span> count)</div><div class="line">        {</div><div class="line">                <span class="keywordflow">return</span> String.join(<span class="stringliteral">&quot;&quot;</span>, Collections.nCopies(count, c));</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordtype">void</span> printTbl(String tblName, String rowTitle, String colTitle, <span class="keywordtype">int</span> T, <span class="keywordtype">int</span> n, VarVector x)</div><div class="line">        {</div><div class="line">                System.out.println(<span class="stringliteral">&quot;    &quot;</span> + tblName + <span class="stringliteral">&quot;:&quot;</span>);</div><div class="line">                System.out.println(<span class="stringliteral">&quot; &quot;</span> + repeatChar(<span class="stringliteral">&quot;_&quot;</span>,10*n+8));</div><div class="line">                <span class="keywordtype">int</span> spl=(10*n-1 - rowTitle.length())/2;</div><div class="line">                <span class="keywordtype">int</span> spr=(10*n-1) - spl -rowTitle.length();</div><div class="line">                System.out.println(<span class="stringliteral">&quot;|        |&quot;</span> + repeatChar(<span class="stringliteral">&quot; &quot;</span>,spl) + rowTitle + repeatChar(<span class="stringliteral">&quot; &quot;</span>,spr) + <span class="stringliteral">&quot;|&quot;</span>);</div><div class="line">                System.out.println(<span class="stringliteral">&quot;|--------+&quot;</span> + repeatChar(<span class="stringliteral">&quot;-&quot;</span>,10*n-1) + <span class="stringliteral">&quot;|&quot;</span>);</div><div class="line">                spl=(6-colTitle.length())/2;</div><div class="line">                spr=6-spl-colTitle.length();</div><div class="line">                System.out.print(<span class="stringliteral">&quot;| &quot;</span> + repeatChar(<span class="stringliteral">&quot; &quot;</span>,spl) + colTitle + repeatChar(<span class="stringliteral">&quot; &quot;</span>,spr) + <span class="stringliteral">&quot; |&quot;</span>);</div><div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j &lt; n; ++j) {</div><div class="line">                        System.out.printf(<span class="stringliteral">&quot;%8d |&quot;</span>,j);</div><div class="line">                }</div><div class="line">                System.out.printf(<span class="stringliteral">&quot;%n|--------+&quot;</span>);</div><div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j &lt; n-1; ++j) {</div><div class="line">                        System.out.printf(<span class="stringliteral">&quot;---------+&quot;</span>);</div><div class="line">                }</div><div class="line">                System.out.printf(<span class="stringliteral">&quot;---------|&quot;</span>);</div><div class="line">                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> t=0; t &lt; T; ++t) {</div><div class="line">                        System.out.printf(<span class="stringliteral">&quot;%n| %6d |&quot;</span>,(t+1));</div><div class="line">                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j &lt; n; ++j) {</div><div class="line">                                System.out.printf(<span class="stringliteral">&quot;%8.2f |&quot;</span>,x.get(j,t).getval());</div><div class="line">                        }</div><div class="line">                }</div><div class="line">                System.out.printf(<span class="stringliteral">&quot;%n &quot;</span> + repeatChar(<span class="stringliteral">&quot;-&quot;</span>,10*n+8) + <span class="stringliteral">&quot;%n&quot;</span>);</div><div class="line">        }</div><div class="line"> </div><div class="line">        @Override</div><div class="line">        <span class="keyword">public</span> <span class="keywordtype">void</span> printSolution()</div><div class="line">        {</div><div class="line">                <span class="keywordflow">if</span> (isSolution()) {</div><div class="line">                        String optSol = (isSolutionOptimal())? <span class="stringliteral">&quot;optimality proven&quot;</span>: <span class="stringliteral">&quot;optimality not proven&quot;</span>;</div><div class="line">                        <span class="keywordtype">int</span> T = task.getHorizonLength();</div><div class="line">                        <span class="keywordtype">int</span> m = task.getMachineNum();</div><div class="line">                        <span class="keywordtype">int</span> n = task.getProductNum();</div><div class="line">                        System.out.printf(<span class="stringliteral">&quot;Objective value = %.4f - %s%n&quot;</span>,getobjVal(),optSol);</div><div class="line">                        printTbl(<span class="stringliteral">&quot;Production&quot;</span>,<span class="stringliteral">&quot;Products&quot;</span>,<span class="stringliteral">&quot;Period&quot;</span>,T,n,x);</div><div class="line">                        printTbl(<span class="stringliteral">&quot;Stock&quot;</span>,<span class="stringliteral">&quot;Products&quot;</span>,<span class="stringliteral">&quot;Period&quot;</span>,T,n,s);</div><div class="line">                        printTbl(<span class="stringliteral">&quot;Machines&quot;</span>,<span class="stringliteral">&quot;Machines&quot;</span>,<span class="stringliteral">&quot;Period&quot;</span>,T,m,y);</div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span> {</div><div class="line">                        <span class="keywordflow">if</span> (isInfeasible())</div><div class="line">                                System.out.println(<span class="stringliteral">&quot;Problem is infeasible&quot;</span>);</div><div class="line">                        <span class="keywordflow">else</span>                            </div><div class="line">                                System.out.println(<span class="stringliteral">&quot;Time limit reached, no solution has been found&quot;</span>);</div><div class="line">                }</div><div class="line">        }       </div><div class="line">} <span class="comment">// end of Multlotsize</span></div></div><!-- fragment --></p>
<p>We see that <code>printSolution()</code> prints three tables:</p><ul>
<li><em>production table</em> that displays an optimal production plan;</li>
<li><em>stock table</em> that presents amounts of all products in stock;</li>
<li><em>machine table</em> that shows how different machines are used in all periods.</li>
</ul>
<p>All the above mentioned tables are printed by calling <code>printTbl()</code>. This procedure prints a table filling it with data stored in a given <code>VarVector</code> object. It's parameters are:</p><ul>
<li><em>tblName</em>: table name;</li>
<li><em>rowTitle</em>: title printed in head row;</li>
<li><em>colTitle</em>: title of first column;</li>
<li><em>T</em>: horizon length;</li>
<li><em>n</em>: (n,T) is size of 2-dimensional vector <code>x</code>;</li>
<li><em>x</em> reference to 2-dimensional <code>VarVector</code> object from <code>{this.x,this.s,this.y}</code>.</li>
</ul>
<h2><a class="anchor" id="sec_Multlotsize_using"></a>
Using `Multlotsize`</h2>
<p>In this section we present an applications that solves Multiproduct Lot-Sizing problems written in text files in the json format. To understand the format of input files, it is enough to look at one of them displayed below. </p><div class="fragment"><div class="line">{</div><div class="line">    &quot;l&quot;: [304, 304, 352, 352, 336, 336],</div><div class="line">    &quot;machines&quot; : [</div><div class="line">        {</div><div class="line">            &quot;name&quot;: &quot;Grinder&quot;,</div><div class="line">            &quot;available&quot;: [6, 5, 4, 4, 3, 5],</div><div class="line">            &quot;cost&quot;: [500, 500, 500, 500, 500, 500]</div><div class="line">        },</div><div class="line">        {</div><div class="line">            &quot;name&quot;: &quot;Vert. driller&quot;,</div><div class="line">            &quot;available&quot;: [3, 2, 2, 2, 3, 3],</div><div class="line">            &quot;cost&quot;: [450, 450, 450, 450, 450, 450]</div><div class="line">        },</div><div class="line">        {</div><div class="line">            &quot;name&quot;: &quot;Hor. driller&quot;,</div><div class="line">            &quot;available&quot;: [5, 3, 3, 4, 4, 4],</div><div class="line">            &quot;cost&quot;: [450, 450, 450, 450, 450, 450]</div><div class="line">        },</div><div class="line">        {</div><div class="line">            &quot;name&quot;: &quot;Borer&quot;,</div><div class="line">            &quot;available&quot;: [2, 2, 2, 1, 2, 2],</div><div class="line">            &quot;cost&quot;: [550, 550, 550, 550, 550, 550]</div><div class="line">        },</div><div class="line">        {</div><div class="line">            &quot;name&quot;: &quot;Planer&quot;,</div><div class="line">            &quot;available&quot;: [2, 2, 2, 2, 1, 1],</div><div class="line">            &quot;cost&quot;: [600, 600, 600, 600, 600, 600]</div><div class="line">        },</div><div class="line">        {</div><div class="line">            &quot;name&quot;: &quot;Packing dev.&quot;,</div><div class="line">            &quot;available&quot;: [3, 3, 2, 2, 3, 2],</div><div class="line">            &quot;cost&quot;: [400, 400, 400, 400, 400, 400]</div><div class="line">        }</div><div class="line">    ],</div><div class="line">    &quot;products&quot;: [</div><div class="line">        {</div><div class="line">            &quot;name&quot;: &quot;0&quot;,</div><div class="line">            &quot;initStock&quot;: 0,</div><div class="line">            &quot;finalStock&quot;: 50,</div><div class="line">            &quot;capacity&quot;: 100, </div><div class="line">            &quot;demands&quot;: [ 500, 600, 300, 200, 0, 500],</div><div class="line">            &quot;costs&quot;: [17, 17, 17, 16, 16, 16],</div><div class="line">            &quot;holdingCosts&quot;: [1, 1, 1, 1, 1, 1],</div><div class="line">            &quot;procTimes&quot;: {&quot;0&quot;: 0.5, &quot;1&quot;: 0.1, &quot;2&quot;: 0.2, &quot;3&quot;: 0.05, &quot;5&quot;: 0.1},</div><div class="line">            &quot;resources&quot;: null</div><div class="line">       },</div><div class="line">        {</div><div class="line">            &quot;name&quot;: &quot;1&quot;,</div><div class="line">            &quot;initStock&quot;: 0,</div><div class="line">            &quot;finalStock&quot;: 50,</div><div class="line">            &quot;capacity&quot;: 100, </div><div class="line">            &quot;demands&quot;: [1000, 700, 600, 300, 100, 500],</div><div class="line">            &quot;costs&quot;: [19, 19, 19, 17, 17, 17],</div><div class="line">            &quot;holdingCosts&quot;: [1, 1, 1, 1, 1, 1],</div><div class="line">            &quot;procTimes&quot;: {&quot;0&quot;: 0.7, &quot;1&quot;: 0.2, &quot;3&quot;: 0.03, &quot;5&quot;: 0.1},</div><div class="line">            &quot;resources&quot;: null</div><div class="line">        },</div><div class="line">        {</div><div class="line">            &quot;name&quot;: &quot;2&quot;,</div><div class="line">            &quot;initStock&quot;: 0,</div><div class="line">            &quot;finalStock&quot;: 50,</div><div class="line">            &quot;capacity&quot;: 100, </div><div class="line">            &quot;demands&quot;: [300, 200,  0, 400, 500, 100],</div><div class="line">            &quot;costs&quot;: [16, 16, 16, 15, 15, 15],</div><div class="line">            &quot;holdingCosts&quot;: [1, 1, 1, 1, 1, 1],</div><div class="line">            &quot;procTimes&quot;: {&quot;2&quot;: 0.8, &quot;4&quot;: 0.01, &quot;5&quot;: 0.1},</div><div class="line">            &quot;resources&quot;: null</div><div class="line">        },</div><div class="line">        {</div><div class="line">            &quot;name&quot;: &quot;3&quot;,</div><div class="line">            &quot;initStock&quot;: 0,</div><div class="line">            &quot;finalStock&quot;: 50,</div><div class="line">            &quot;capacity&quot;: 100, </div><div class="line">            &quot;demands&quot;: [300, 0, 0, 500, 100, 300],</div><div class="line">            &quot;costs&quot;: [8, 8, 8, 7, 7, 7],</div><div class="line">            &quot;holdingCosts&quot;: [1, 1, 1, 1, 1, 1],</div><div class="line">            &quot;procTimes&quot;: {&quot;1&quot;: 0.3, &quot;3&quot;: 0.07, &quot;5&quot;: 0.1},</div><div class="line">            &quot;resources&quot;: null</div><div class="line">        },</div><div class="line">        {</div><div class="line">            &quot;name&quot;: &quot;4&quot;,</div><div class="line">            &quot;initStock&quot;: 0,</div><div class="line">            &quot;finalStock&quot;: 50,</div><div class="line">            &quot;capacity&quot;: 100, </div><div class="line">            &quot;demands&quot;: [800, 400, 500, 200, 1000, 1100],</div><div class="line">            &quot;costs&quot;: [9, 9, 9, 8, 8, 8],</div><div class="line">            &quot;holdingCosts&quot;: [1, 1, 1, 1, 1, 1],</div><div class="line">            &quot;procTimes&quot;: {&quot;0&quot;: 0.3, &quot;3&quot;: 0.01, &quot;4&quot;: 0.05, &quot;5&quot;: 0.1},</div><div class="line">            &quot;resources&quot;: {&quot;0&quot;: 1, &quot;2&quot;: 1}</div><div class="line">        },</div><div class="line">        {</div><div class="line">            &quot;name&quot;: &quot;5&quot;,</div><div class="line">            &quot;initStock&quot;: 0,</div><div class="line">            &quot;finalStock&quot;: 50,</div><div class="line">            &quot;capacity&quot;: 100, </div><div class="line">            &quot;demands&quot;: [200, 300, 400, 0, 300, 500],</div><div class="line">            &quot;costs&quot;: [16, 16, 16, 14, 14, 14],</div><div class="line">            &quot;holdingCosts&quot;: [1, 1, 1, 1, 1, 1],</div><div class="line">            &quot;procTimes&quot;: {&quot;0&quot;: 0.2, &quot;1&quot;: 0.6, &quot;5&quot;: 0.1},</div><div class="line">            &quot;resources&quot;: null</div><div class="line">        },</div><div class="line">        {</div><div class="line">            &quot;name&quot;: &quot;6&quot;,</div><div class="line">            &quot;initStock&quot;: 0,</div><div class="line">            &quot;finalStock&quot;: 50,</div><div class="line">            &quot;capacity&quot;: 100,</div><div class="line">            &quot;demands&quot;: [100, 150, 100, 100, 0, 60],</div><div class="line">            &quot;costs&quot;: [25, 25, 25, 22, 22, 22],</div><div class="line">            &quot;holdingCosts&quot;: [1, 1, 1, 1, 1, 1],</div><div class="line">            &quot;procTimes&quot;: {&quot;0&quot;: 0.5, &quot;2&quot;: 0.6, &quot;3&quot;: 0.08, &quot;4&quot;: 0.05, &quot;5&quot;: 0.15},</div><div class="line">            &quot;resources&quot;: {&quot;0&quot;: 1, &quot;5&quot;: 2}</div><div class="line">        }</div><div class="line">    ]</div><div class="line">}</div><div class="line"></div></div><!-- fragment --><p>The main class of our application, called <code>testMultlotsize</code>, is implemented as follows. </p><div class="fragment"><div class="line"><span class="keyword">package </span>multlotsizing;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.Reader;</div><div class="line"><span class="keyword">import</span> java.io.FileReader;</div><div class="line"><span class="keyword">import</span> com.google.gson.Gson;</div><div class="line"><span class="keyword">import</span> com.google.gson.GsonBuilder;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">class </span>testMultlotsize {</div><div class="line">        <span class="keyword">static</span> {</div><div class="line">                System.loadLibrary(<span class="stringliteral">&quot;JVmipcl&quot;</span>);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> main(String[] args) {</div><div class="line">                <span class="keywordflow">try</span> {</div><div class="line">                        Task task = readTask(args[0]);</div><div class="line">                        Multlotsize ml = <span class="keyword">new</span> Multlotsize(<span class="stringliteral">&quot;test&quot;</span>);</div><div class="line">                        ml.model(task);</div><div class="line">                        ml.optimize();</div><div class="line">                        ml.printSolution();             </div><div class="line">                } <span class="keywordflow">catch</span>(Throwable e) {</div><div class="line">                        e.printStackTrace();</div><div class="line">                }</div><div class="line">        }</div><div class="line">        </div><div class="line">        <span class="keyword">static</span> Task readTask(String fileName) <span class="keywordflow">throws</span> IOException {</div><div class="line">                <span class="keywordflow">try</span>(Reader reader = <span class="keyword">new</span> FileReader(fileName)){</div><div class="line">                        System.out.println(fileName);</div><div class="line">                        Gson gson = <span class="keyword">new</span> GsonBuilder().create();</div><div class="line">                        Task task = gson.fromJson(reader, Task.class);</div><div class="line">                        <span class="keywordflow">return</span> task;</div><div class="line">                }</div><div class="line">        }</div><div class="line"></div><div class="line">} <span class="comment">// end of testMultlotsize</span></div><div class="line"></div></div><!-- fragment --><p>In its static block, <code>testMultlotsize</code>, loads the <code>JVmipcl</code> library (<code>mipcl.so</code> in Linux, or <code>mipcl.dll</code> in Windows). The <code>main()</code> function first reads an instance of the Multiproduct Lot-Sizing problem into a <code>Task</code> object. This is done by calling <code>readTask()</code>, which implementation is surprisingly simple and short. Then, <code>main()</code> creates and object of the <code>Multlotsize</code> class. After that, it calls <code>model()</code> to builds the <code>MIPshell</code> model, which is then optimized with the call to <code>optimize()</code>. An optimal plan is printed by the call to <code>printSolution()</code>.</p>
<h2><a class="anchor" id="mipshell_multLotSizeExample"></a>
Example problem</h2>
<p>An engineering factory makes seven products (numbered from 1 to 7) on the following machines: four grinders, two vertical drills, three horizontal drills, one borer, one planer, and two packing devices. Products 5 and 7 are complete sets: one unit of Product 5 comprises one unit of Product 1 and one units of Product 3, and one unit of Product 7 comprises one unit of Product 1 and two unit of Product 6. Unit production times (in hours) required on each process are given in Table 1. A dash indicates that a product does not require a process. All required processes on each product unit can be applied in any order. So, no sequencing problem need to be considered.</p>
<center> <a class="anchor" id=""></a>
<table class="doxtable">
<caption>Table 1: <em>Unit Production Times</em></caption>
<tr>
<th></th><th colspan="7">Products  </th></tr>
<tr>
<th>Processes </th><th>1 </th><th>2 </th><th>3 </th><th>4 </th><th>5 </th><th>6 </th><th>7  </th></tr>
<tr>
<td>Grinding </td><td>0.5 </td><td>0.7 </td><td>&mdash; </td><td>&mdash; </td><td>0.3 </td><td>0.2 </td><td>0.5  </td></tr>
<tr>
<td>Vertical drilling </td><td>0.1 </td><td>0.2 </td><td>&mdash; </td><td>0.3 </td><td>&mdash; </td><td>0.6 </td><td>&mdash;  </td></tr>
<tr>
<td>Horizontal drilling </td><td>0.2 </td><td>&mdash; </td><td>0.8 </td><td>&mdash; </td><td>&mdash; </td><td>&mdash; </td><td>0.6  </td></tr>
<tr>
<td>Boring </td><td>0.05 </td><td>0.03 </td><td>&mdash; </td><td>0.07 </td><td>0.01 </td><td>&mdash; </td><td>0.08  </td></tr>
<tr>
<td>Planing </td><td>&mdash; </td><td>&mdash; </td><td>0.0 </td><td>&mdash; </td><td>0.05 </td><td>&mdash; </td><td>0.05  </td></tr>
<tr>
<td>Packing </td><td>0.1 </td><td>0.1 </td><td>0.1 </td><td>0.1 </td><td>0.1 </td><td>0.1 </td><td>0.15  </td></tr>
</table>
</center><p>The planning horizon consists of six months from January to June. The demands for products are given in Table 2. The factory works a 5 day week with two shifts of 8 hours each day. The number of working days in each month is also presented in Table 2.</p>
<center> <a class="anchor" id=""></a>
<table class="doxtable">
<caption>Table 2: <em>Demands for Products</em></caption>
<tr>
<th></th><th>Working </th><th colspan="7">Products  </th></tr>
<tr>
<th>Months </th><th>days </th><th>1 </th><th>2 </th><th>3 </th><th>4 </th><th>5 </th><th>6 </th><th>7  </th></tr>
<tr>
<td>January </td><td>19 </td><td>500 </td><td>1000 </td><td>300 </td><td>300 </td><td>800 </td><td>200 </td><td>100  </td></tr>
<tr>
<td>February </td><td>19 </td><td>600 </td><td>700 </td><td>200 </td><td>0 </td><td>400 </td><td>300 </td><td>150  </td></tr>
<tr>
<td>March </td><td>22 </td><td>300 </td><td>600 </td><td>0 </td><td>0 </td><td>500 </td><td>400 </td><td>100  </td></tr>
<tr>
<td>April </td><td>22 </td><td>200 </td><td>300 </td><td>400 </td><td>500 </td><td>200 </td><td>0 </td><td>10  </td></tr>
<tr>
<td>May </td><td>21 </td><td>0 </td><td>100 </td><td>500 </td><td>100 </td><td>1000 </td><td>300 </td><td>0  </td></tr>
<tr>
<td>June </td><td>21 </td><td>500 </td><td>500 </td><td>100 </td><td>300 </td><td>1100 </td><td>500 </td><td>60  </td></tr>
</table>
</center><p>During the planning horizon some machines will be down for maintenance: The setup cost of a machine mainly is the fixed salary of an operator. As the planer needs two operators, its setup cost is two times bigger than setup cost of the other machines. Machine setup costs, and the numbers of machines of each type available in each month are given in Table 3.</p>
<center> <a class="anchor" id=""></a>
<table class="doxtable">
<caption>Table 3: <em>Machines Available and their Setup Costs</em></caption>
<tr>
<th></th><th>Setup </th><th colspan="6">Available machines  </th></tr>
<tr>
<th>Machine </th><th>cost </th><th>Jan </th><th>Feb </th><th>Mar </th><th>Apr </th><th>May </th><th>Jun  </th></tr>
<tr>
<td>Grinder </td><td>500 </td><td>6 </td><td>5 </td><td>4 </td><td>4 </td><td>3 </td><td>5  </td></tr>
<tr>
<td>Ver. driller </td><td>450 </td><td>3 </td><td>2 </td><td>2 </td><td>2 </td><td>2 </td><td>3  </td></tr>
<tr>
<td>Hor. driller </td><td>450 </td><td>5 </td><td>3 </td><td>3 </td><td>4 </td><td>4 </td><td>4  </td></tr>
<tr>
<td>Borer </td><td>550 </td><td>2 </td><td>2 </td><td>2 </td><td>1 </td><td>2 </td><td>2  </td></tr>
<tr>
<td>Planer </td><td>1000 </td><td>2 </td><td>2 </td><td>2 </td><td>2 </td><td>1 </td><td>1  </td></tr>
<tr>
<td>Packing dev. </td><td>400 </td><td>3 </td><td>3 </td><td>2 </td><td>2 </td><td>3 </td><td>3  </td></tr>
</table>
</center><p>Unit production costs depend on the production period. These costs are given in Table 4. We see that it is more expensive to produce in the cold months (January, February, and March) than in the warm ones (April, May, and June).</p>
<center> <a class="anchor" id=""></a>
<table class="doxtable">
<caption>Table 4: <em>Production Costs</em></caption>
<tr>
<th></th><th colspan="7">Products  </th></tr>
<tr>
<th>Periods </th><th>1 </th><th>2 </th><th>3 </th><th>4 </th><th>5 </th><th>6 </th><th>7  </th></tr>
<tr>
<td>January, February, March </td><td>17 </td><td>19 </td><td>16 </td><td>8 </td><td>9 </td><td>16 </td><td>25  </td></tr>
<tr>
<td>April, May, June </td><td>16 </td><td>17 </td><td>15 </td><td>7 </td><td>8 </td><td>14 </td><td>22  </td></tr>
</table>
</center><p>It is possible to store up to 100 units of each product at a cost of $1 per unit per month. There are not stock at the beginning of the horizon but it is desired to have a stock of 50 units of each product at the end of June.</p>
<p>When and what should the factory produce to maximize the total profit?</p>
<p>To solve this example problem with our program described in the previous section, we prepared an input text file <code>test1.json</code> located in the folder </p><pre class="fragment"> $MIPCLDIR/mipcl-java/examples/multlotsizing/tests
</pre><p>Its content has been presented above in section <a class="el" href="JVmultlotsize.html#sec_Multlotsize_using">Using `Multlotsize`</a>.</p>
<p>If we open a console window, enter the commands </p><pre class="fragment"> cd $MIPCLDIR/mipcl-java/examples/multlotsizing
 ./compile
 ./run tests/test1.json
</pre><p>we will get the solution printed on the screen. In a concise form this solution is presented in tables 5 and 6.</p>
<center> <a class="anchor" id=""></a>
<table class="doxtable">
<caption>Table 5: <em>Machines Used</em></caption>
<tr>
<th></th><th colspan="6">Used machines  </th></tr>
<tr>
<th>Machine </th><th>Jan </th><th>Feb </th><th>Mar </th><th>Apr </th><th>May </th><th>Jun  </th></tr>
<tr>
<td>Grinder </td><td>6 </td><td>5 </td><td>3 </td><td>2 </td><td>3 </td><td>5  </td></tr>
<tr>
<td>Ver. driller </td><td>3 </td><td>2 </td><td>2 </td><td>1 </td><td>2 </td><td>2  </td></tr>
<tr>
<td>Hor. driller </td><td>5 </td><td>3 </td><td>2 </td><td>2 </td><td>4 </td><td>4  </td></tr>
<tr>
<td>Borer </td><td>1 </td><td>1 </td><td>1 </td><td>1 </td><td>1 </td><td>1  </td></tr>
<tr>
<td>Planer </td><td>1 </td><td>1 </td><td>1 </td><td>1 </td><td>1 </td><td>1  </td></tr>
<tr>
<td>Packing dev. </td><td>2 </td><td>2 </td><td>1 </td><td>1 </td><td>2 </td><td>2  </td></tr>
</table>
</center><p><br />
 </p><center> <a class="anchor" id=""></a>
<table class="doxtable">
<caption>Table 6: <em>Products Produced and Stocked</em></caption>
<tr>
<th colspan="2"></th><th colspan="7">Products  </th></tr>
<tr>
<th colspan="2">Months </th><th>1 </th><th>2 </th><th>3 </th><th>4 </th><th>5 </th><th>6 </th><th>7  </th></tr>
<tr>
<td>Jan </td><td>Produced </td><td>1438 </td><td>1000 </td><td>1100 </td><td>300 </td><td>800 </td><td>479 </td><td>138  </td></tr>
<tr>
<td>Jan </td><td>Stocked </td><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>0 </td><td>3 </td><td>38  </td></tr>
<tr>
<td>Feb </td><td>Produced </td><td>1245 </td><td>800 </td><td>700 </td><td>0 </td><td>500 </td><td>539 </td><td>121  </td></tr>
<tr>
<td>Feb </td><td>Stocked </td><td>24 </td><td>100 </td><td>0 </td><td>0 </td><td>100 </td><td>0 </td><td>9  </td></tr>
<tr>
<td>Mar</td><td>Produced </td><td>803 </td><td>500 </td><td>536 </td><td>2 </td><td>436 </td><td>641 </td><td>91  </td></tr>
<tr>
<td>Mar </td><td>Stocked </td><td>0 </td><td>0 </td><td>100 </td><td>2 </td><td>36 </td><td>59 </td><td>0  </td></tr>
<tr>
<td>Apr</td><td>Produced </td><td>572 </td><td>304 </td><td>662 </td><td>498 </td><td>264 </td><td>141 </td><td>100  </td></tr>
<tr>
<td>Apr </td><td>Stocked </td><td>8 </td><td>4 </td><td>98 </td><td>0 </td><td>100 </td><td>0 </td><td>0  </td></tr>
<tr>
<td>May</td><td>Produced </td><td>1000 </td><td>96 </td><td>1355 </td><td>100 </td><td>908 </td><td>592 </td><td>100  </td></tr>
<tr>
<td>May </td><td>Stocked </td><td>0 </td><td>0 </td><td>45 </td><td>0 </td><td>8 </td><td>92 </td><td>100  </td></tr>
<tr>
<td>Jun</td><td>Produced </td><td>1702 </td><td>550 </td><td>1247 </td><td>350 </td><td>1142 </td><td>478 </td><td>10  </td></tr>
<tr>
<td>Jun </td><td>Stocked </td><td>50 </td><td>50 </td><td>50 </td><td>50 </td><td>50 </td><td>50 </td><td>50  </td></tr>
</table>
</center> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jun 12 2017 00:28:59 for JVmipcl by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
